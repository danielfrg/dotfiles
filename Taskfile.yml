version: "3"

env:
  TAG: base

tasks:

  ansible:
    cmds:
      - task: ansible:laptop

  ansible:laptop:
    dir: ansible
    cmds:
      - ansible-playbook local.yml --tags "laptop"

  ansible:cloudtop:
    dir: ansible
    cmds:
      - ansible-playbook remote.yml --limit cloudtop --ask-become-pass

  ansible:tag:
    dir: ansible
    cmds:
      - ansible-playbook local.yml --tags "{{.TAG}}"

  fonts:
    cmds:
      - bash install-fonts.sh

  link:
    cmds:
      - stow -t $HOME base
      - stow -t $HOME zsh
      - stow -t $HOME python
      - stow -t $HOME nvim
      - stow -t $HOME bin

  gpg:
    cmds:
      - gpg --list-keys
      - stow -t $HOME gpg
      - echo "Manually run 'gpg --import <file>' for the public and private keys"
